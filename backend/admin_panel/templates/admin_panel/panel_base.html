{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" dir="{% if LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{% static 'images/favicon.png' %}" type="image/png">

    <title>{% block title %}{% endblock %}</title>

    <!-- โ ุฎุทูุท ูุฃููููุงุช -->
    <link rel="stylesheet" href="{% static 'fonts/tajawal.css' %}"> 
    <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">

    <!-- โ ูููุงุช CSS -->
    <link rel="stylesheet" href="{% static 'css/shared.css' %}">
    <link rel="stylesheet" href="{% static 'css/panel_style.css' %}">
    <link rel="stylesheet" href="{% static 'css/dark_mode.css' %}">
    {% block extra_css %}{% endblock %}
</head>

<body class="{% if dark_mode %}dark-mode{% endif %}">
    <div class="panel-wrapper">

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <img src="/static/images/iconlogowi.svg" alt="ุงูุดุนุงุฑ" style="max-width: 40px;">
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <!-- ุงูุฑุฆูุณูุฉ -->
                    <li>
                        <button class="sidebar-link" data-target="dashboard-menu">
                            <i class="ri-function-line"></i>
                        </button>
                        <div class="sub-sidebar" id="dashboard-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-function-line"></i>
                                <span>{% trans "ุงูุฑุฆูุณูุฉ" %}</span>
                            </div>
                            <ul>
                                <li><a href="{% url 'admin_panel:dashboard' %}">{% trans "ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- ุงูุนููุงุก -->
                    <li>
                        <button class="sidebar-link" data-target="clients-menu">
                            <i class="ri-group-line"></i>
                        </button>
                        <div class="sub-sidebar" id="clients-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-group-line"></i>
                                <span>{% trans "ุงูุนููุงุก" %}</span>
                            </div>
                            <ul>
                                <!-- ๐๏ธ ุนููุงู: ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุนููุงุก -->
                                <li>
                                    <span style="padding: 8px 16px; display: flex; align-items: center; color: #888;">
                                        <i class="ri-folder-2-fill" style="margin-left: 8px;"></i>
                                        ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุนููุงุก
                                    </span>
                                </li>
                    
                                <li>
                                    <a href="{% url 'admin_panel:clients' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        {% trans "ุฅุฏุงุฑุฉ ุงูุนููุงุก" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'admin_panel:companies' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        ุงูุดุฑูุงุช
                                    </a>
                                </li>
                    
                                <!-- ๐ ุนููุงู: ุงูุนููุฏ ูุงูุทูุจุงุช -->
                                <li>
                                    <span style="padding: 8px 16px; display: flex; align-items: center; color: #888;">
                                        <i class="ri-folder-2-fill" style="margin-left: 8px;"></i>
                                        ุงูุนููุฏ ูุงูุทูุจุงุช
                                    </span>
                                </li>
                    
                                <li>
                                    <a href="{% url 'contracts:contracts_list' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        {% trans "ุฅุฏุงุฑุฉ ุงูุนููุฏ" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'admin_panel:service_requests' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        {% trans "ุทูุจุงุช ุงูุนููุงุก" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'contracts:archived_contracts' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        ุฃุฑุดูู ุงูุนููุฏ
                                    </a>
                                    
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        ุงูุนููุฏ ุงูููุชููุฉ
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    
                    <!-- ุงูุฅุฏุงุฑุฉ ุงูุฏุงุฎููุฉ -->
                    <li>
                        <button class="sidebar-link" data-target="system-users-menu">
                            <i class="ri-user-settings-line"></i>
                        </button>
                        <div class="sub-sidebar" id="system-users-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-user-settings-line"></i>
                                <span>{% trans "ุงูุฅุฏุงุฑุฉ ุงูุฏุงุฎููุฉ" %}</span>
                            </div>
                            <ul>
                                <li><a href="{% url 'admin_panel:employees' %}">{% trans "ุฅุฏุงุฑุฉ ุงูููุธููู" %}</a></li>
                                <li><a href="#">{% trans "ููุญุฉ ุงููุณุชุฎุฏู" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- ุงููุงููุฉ -->
                    <li>
                        <button class="sidebar-link" data-target="finance-menu">
                            <i class="ri-bill-line"></i>
                        </button>
                        <div class="sub-sidebar" id="finance-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-bill-line"></i>
                                <span>{% trans "ุงููุงููุฉ" %}</span>
                            </div>
                            <ul>
                                <li><a href="#">{% trans "ุงูููุงุชูุฑ ูุงููุฏููุนุงุช" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- ุงูุชุญูููุงุช ูุงูุชูุงุฑูุฑ -->
                    <li>
                        <button class="sidebar-link" data-target="insights-menu">
                            <i class="ri-bar-chart-line"></i>
                        </button>
                        <div class="sub-sidebar" id="insights-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-bar-chart-line"></i>
                                <span>{% trans "ุงูุชุญุงููู ูุงูุชูุงุฑูุฑ" %}</span>
                            </div>
                            <ul>
                                <li><a href="#">{% trans "ุงูุชูุงุฑูุฑ ูุงูุชุญุงูููุงุช" %}</a></li>
                                <li><a href="#">{% trans "ุงูุฅุดุนุงุฑุงุช" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- ุงูุฏุนู ุงูููู -->
                    <li>
                        <button class="sidebar-link" data-target="support-menu">
                            <i class="ri-customer-service-line"></i>
                        </button>
                        <div class="sub-sidebar" id="support-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-customer-service-line"></i>
                                <span>{% trans "ุงูุฏุนู ุงูููู" %}</span>
                            </div>
                            <ul>
                                <li><a href="#">{% trans "ูุฑูุฒ ุงูุฏุนู" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- ุงูุฅุนุฏุงุฏุงุช -->
                    <li>
                        <button class="sidebar-link" data-target="settings-menu">
                            <i class="ri-settings-3-line"></i>
                        </button>
                        <div class="sub-sidebar" id="settings-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-settings-3-line"></i>
                                <span>{% trans "ุงูุฅุนุฏุงุฏุงุช" %}</span>
                            </div>
                            <ul>
                                <li><a href="#"> {% trans "ุงุนุฏุงุฏุงุช ุงููุธุงู" %}</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- โ ุงูููุฏุฑ ุฎุงุฑุฌ ุงูุญุงููุฉ -->
    
        <header class="panel-header">
            
            <div class="user-menu">
                <!-- ุฃููููุฉ ุงููุถุน ุงููููู -->
                <i class="ri-moon-line theme-toggle" id="theme-toggle"></i>
            
                <!-- ุฃููููุฉ ุชุบููุฑ ุงููุบุฉ -->
                <i class="ri-global-line lang-toggle" id="lang-toggle"></i>






                
                <div class="user-info">
                    {% if request.user.is_authenticated and request.user.image %}
                    <img src="{{ request.user.image.url }}" class="avatar" alt="ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ">
                {% else %}
                    <img src="{% static 'images/default_avatar.svg' %}" class="avatar" alt="ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ">
                {% endif %}
                
                    <div class="user-details">
                        <span class="user-name">
                            {% blocktrans with name=request.user.full_name %}
                            ุตุจุงุญ ุงูุฎูุฑ: {{ name }}
                        {% endblocktrans %}
                        
                        </span>
                        <span class="user-email">{{ request.user.email }}</span>
                    </div>
                    <button class="dropdown-toggle">
                        <i class="ri-arrow-down-s-line dropdown-icon"></i>
                    </button>
                </div>
    
                <form id="lang-form" action="{% url 'set_language' %}" method="post" style="display: none;">
                    {% csrf_token %}
                    <input type="hidden" name="next" value="{{ request.path }}">
                    <input type="hidden" name="language" id="language-input">
                </form>

                <div class="dropdown-menu">
                    <a href="{% url 'admin_panel:profile' %}">
                        <i class="ri-user-settings-line"></i> {% trans "ุงูููู ุงูุดุฎุตู" %}
                    </a>
                    <a href="#">
                        <i class="ri-notification-line"></i>{% trans "ุชุฎุตูุต ุงูุงุดุนุงุฑุงุช" %} 
                    </a>
                    <a href="#" class="logout-link" onclick="openModal(event)">
                        <i class="ri-logout-box-r-line"></i> {% trans "ุชุณุฌูู ุงูุฎุฑูุฌ" %}
                    </a>
                </div>  
                
            </div>
                <!-- โ ูุณู Breadcrumb -->
                <nav class="breadcrumb-wrapper">
                    <ul class="breadcrumb" id="breadcrumb-list">
                        <li class="breadcrumb-item">
                            <a href="{% url 'admin_panel:dashboard' %}">
                                 {% trans "ุงูุฑุฆูุณูุฉ" %}<i class="ri-home-4-line"></i>
                            </a>
                        </li>
                        <!-- ุงูุนูุงุตุฑ ุงูุฃุฎุฑู ุณุชุถุงู ุจุงูุฌุงูุงุณูุฑูุจุช -->
                    </ul>
                </nav>


        </header>


        <!-- โ ุงูุญุงููุฉ ุงูุฑุฆูุณูุฉ -->

        <div class="main-container">
            <div class="messages-container">
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }}">
                            <i class="{% if message.tags == 'success' %}ri-checkbox-circle-line{% elif message.tags == 'error' or message.tags == 'danger' %}ri-close-circle-fill{% elif message.tags == 'warning' %}ri-alert-fill{% elif message.tags == 'info' %}ri-information-fill{% endif %}"></i>
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            </div>

            <div id="logoutModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal()">ร</span>
                    <h2>{% trans "ุชุฃููุฏ ุชุณุฌูู ุงูุฎุฑูุฌ" %}</h2>
                    <p>{% trans "ูู ุงูุช ูุชุฃูุฏ ูู ุฃูู ุชุฑูุฏ ุชุณุฌูู ุงูุฎุฑูุฌ ุ" %}</p>
                    <div class="modal-actions">
                        <form id="logoutForm" action="{% url 'logout' %}" method="POST">
                            {% csrf_token %}
                            <button type="submit">{% trans "ูุนู" %}</button>
                        </form>
                        <button onclick="closeModal()">{% trans "ุฅูุบุงุก" %}</button>
                    </div>
                </div>
            </div>

                        <!-- โ ููุฏุงู ุงูุญุฐู ุงูููุญุฏ -->
            <div id="universalDeleteModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeUniversalDeleteModal()">ร</span>
                    <h2 id="deleteModalTitle">ุชุฃููุฏ ุงูุญุฐู</h2>
                    <p id="deleteModalMessage">โ๏ธ ูู ุฃูุช ูุชุฃูุฏ ูู ุฑุบุจุชู ูู ุญุฐู ูุฐุง ุงูุนูุตุฑุ</p>
                    <div class="modal-actions">
                        <form id="universalDeleteForm" method="POST" action="">
                            {% csrf_token %}
                            <button type="submit" class="btn-delete-confirm">ูุนู</button>
                        </form>
                        <button type="button" class="btn-cancel" onclick="closeUniversalDeleteModal()">ุฅูุบุงุก</button>
                    </div>
                </div>
            </div>


            <main>
                

                {% block content %}{% endblock %}
            </main>

            <!-- Footer -->
            <footer class="panel-footer">
                <p>ยฉ 2025 advard</p>
            </footer>

        </div>
    </div>

    <!-- JavaScript -->
    <script src="{% static 'js/shared.js' %}" defer></script>
    <script src="{% static 'js/panel_script.js' %}" defer></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
