{% extends "admin_panel/panel_base.html" %}

{% load static %}

{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Advard{% endblock %}

{% block extra_css %}

<style>

    
    .dashboard-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* ØªØµØºÙŠØ± Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
    gap: 15px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
    margin-bottom: 30px;
}

    
    .dashboard-card {
        background-color: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        text-align: center;
        transition: transform 0.3s;
        min-height: 80px; /* ØªØµØºÙŠØ± Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ */
    }
    


    
    .dashboard-card:hover {
        transform: translateY(-5px);
    }
    
    .dashboard-card h3 {
        font-size: 12px;
        color: #555;
        margin-bottom: 10px;
    }
    
    .dashboard-card .value {
        font-size: 16px;
        font-weight: bold;
        color: #033043;
        margin: 0;
    }
    
    .dashboard-card .subtext {
        font-size: 14px;
        color: #777;
        margin-top: 5px;
    }
    
    .dashboard-section {
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        padding: 20px;
        margin-bottom: 30px;
    }
    
    .section-title {
        font-size: 20px;
        color: #333;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    .chart-container {
        position: relative;
        height: 300px;
        margin-bottom: 20px;
        font-family: 'Tajawal';

    }
    
    .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
    }
    
    .quick-action-btn {
        background-color: #0A7273;
        border: none;
        border-radius: 8px;
        padding: 15px 10px;
        color: white;
        font-family: 'Tajawal';
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .quick-action-btn:hover {
        background-color: #07595a;
        color: white;
    }
    
    .quick-action-btn i {
        display: block;
        font-size: 20px;
        margin-bottom: 8px;

    }
    
    .activity-log {
        max-height: 400px;
        overflow-y: auto;
    }
    
    .activity-item {
        padding: 12px 0;
        border-bottom: 1px solid #f0f0f0;
        display: flex;
        align-items: center;
    }
    
    .activity-item:last-child {
        border-bottom: none;
    }
    
    .activity-icon {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background-color: #f0f7fa;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-left: 15px;
        color: #033043;
    }
    
    .activity-details {
        flex: 1;
    }
    
    .activity-time {
        font-size: 12px;
        color: #777;
    }

    .ordersChart {
        font-size: 12px;
        color: #777;
    }

    .notification-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: #FDA521;
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    

    
    @keyframes slideIn {
        0% { opacity: 0; transform: translateX(-50%) translateY(-50px); }
        100% { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
    
    @keyframes fadeOut {
        0% { opacity: 1; }
        100% { opacity: 0; }
    }
    
    .two-columns {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }
    
    @media (max-width: 768px) {
        .two-columns {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}




    <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    {% block content %}

    <div class="dashboard-container">
        {% if request.user.is_authenticated and not welcome_shown %}
        <div class="welcome-animation">
            <h2>Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ØŒ {{ request.user.full_name }}</h2>
            <!-- Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø®ÙÙŠØ© Ù„Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            <input type="hidden" id="welcomeUrl" value="{% url 'admin_panel:mark_welcome_shown' %}">
            <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

        </div>
        {% endif %}
    </div>

    

    <div class="page-container">
    <div class="dashboard-summary">
        <div class="dashboard-card">
            <h3>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯</h3>
            <p class="value">124</p>
            <p class="subtext">+12 Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</p>
        </div>
        
        <div class="dashboard-card">
            <h3>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</h3>
            <p class="value">892</p>
            <p class="subtext">78% Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</p>
        </div>
        
        <div class="dashboard-card">
            <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h3>
            <p class="value">42</p>
            <p class="subtext">5 Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„ÙŠÙˆÙ…</p>
        </div>
        
        <div class="dashboard-card">
            <h3>Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„</h3>
            <p class="value">68%</p>
            <p class="subtext">Ù…Ù† 120 Ø·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</p>
        </div>

        <div class="dashboard-card">
            <h3>Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„</h3>
            <p class="value">68%</p>
            <p class="subtext">Ù…Ù† 120 Ø·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</p>
        </div>

        <div class="dashboard-card">
            <h3>Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„</h3>
            <p class="value">68%</p>
            <p class="subtext">Ù…Ù† 120 Ø·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</p>
        </div>
    </div>

    <!-- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
    <div class="two-columns">
        <div class="dashboard-section">
            <h2 class="section-title">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
            <div class="chart-container">
                <canvas id="ordersChart"></canvas>
            </div>
        </div>
        
        <div class="dashboard-section">
            <h2 class="section-title">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h2>
            <div class="quick-actions">
                <button class="quick-action-btn">
                    <i class="ri-user-add-line"></i>
                    Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„
                </button>
                <button class="quick-action-btn">
                    <i class="ri-task-line"></i>
                    Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                </button>
                <button class="quick-action-btn">
                    <i class="ri-notification-line"></i>
                    Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±
                </button>
                <button class="quick-action-btn">
                    <i class="ri-download-line"></i>
                    ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª
                </button>
            </div>
            
            <h2 class="section-title" style="margin-top: 30px;">Ø£Ø­Ø¯Ø« Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
            <div class="activity-log">
                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="ri-message-3-line"></i>
                    </div>
                    <div class="activity-details">
                        <strong>Ø·Ù„Ø¨ #2451</strong> - Ø®Ø¯Ù…Ø© ØªØµÙ…ÙŠÙ… Ù…ÙˆÙ‚Ø¹
                        <div class="activity-time">Ù…Ù†Ø° 15 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                    </div>
                    <span class="badge bg-warning text-dark">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="ri-message-3-line"></i>
                    </div>
                    <div class="activity-details">
                        <strong>Ø·Ù„Ø¨ #2450</strong> - Ø®Ø¯Ù…Ø© SEO
                        <div class="activity-time">Ù…Ù†Ø° Ø³Ø§Ø¹Ø©</div>
                    </div>
                    <span class="badge bg-success">Ù…Ù‚Ø¨ÙˆÙ„</span>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="ri-message-3-line"></i>
                    </div>
                    <div class="activity-details">
                        <strong>Ø·Ù„Ø¨ #2449</strong> - ØªØ·Ø¨ÙŠÙ‚ Ø¬ÙˆØ§Ù„
                        <div class="activity-time">Ù…Ù†Ø° 3 Ø³Ø§Ø¹Ø§Øª</div>
                    </div>
                    <span class="badge bg-danger">Ù…Ø±ÙÙˆØ¶</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª -->
    <div class="dashboard-section">
        <h2 class="section-title">Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h2>
        <div class="activity-log">
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="ri-user-settings-line"></i>
                </div>
                <div class="activity-details">
                    Ù‚Ø§Ù… <strong>Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯</strong> Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ #452
                    <div class="activity-time">Ø§Ù„ÙŠÙˆÙ…ØŒ 10:45 Øµ</div>
                </div>
            </div>
            
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="ri-user-settings-line"></i>
                </div>
                <div class="activity-details">
                    ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ #2448 Ø¨ÙˆØ§Ø³Ø·Ø© <strong>Ù†ÙˆØ±Ø§ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡</strong>
                    <div class="activity-time">Ø§Ù„ÙŠÙˆÙ…ØŒ 09:30 Øµ</div>
                </div>
            </div>
            
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="ri-user-settings-line"></i>
                </div>
                <div class="activity-details">
                    <strong>Ù…Ø±ÙŠÙ… Ø®Ø§Ù„Ø¯</strong> Ø£Ø±Ø³Ù„Øª Ø¥Ø´Ø¹Ø§Ø±Ù‹Ø§ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                    <div class="activity-time">Ø¨Ø§Ù„Ø£Ù…Ø³ØŒ 05:20 Ù…</div>
                </div>
            </div>
        </div>
    </div>
    
</div>
</div>


{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const welcomeElement = document.querySelector('.welcome-animation');
    if (!welcomeElement) return;

    setTimeout(() => {
        welcomeElement.style.transition = 'opacity 0.5s ease';
        welcomeElement.style.opacity = '0';
        
        setTimeout(async () => {
            welcomeElement.style.display = 'none';
            
            try {
                const response = await fetch(document.getElementById('welcomeUrl').value, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                        'Content-Type': 'application/json'
                    },
                    credentials: 'same-origin'
                });
                
                if (!response.ok) throw new Error('Request failed');
                const data = await response.json();
                console.log('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­:', data);
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø©:', error);
                welcomeElement.style.display = '';
                welcomeElement.style.opacity = '1';
            }
        }, 500);
    }, 3000);



    // âœ… Ù…Ø®Ø·Ø· Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†
    const isDarkMode = document.body.classList.contains("dark-mode");
    const textColor = isDarkMode ? "#ffffff" : "#025c7a"; 
    const ordersCtx = document.getElementById("ordersChart").getContext("2d");

    const ordersChart = new Chart(ordersCtx, {
        type: "line",
        data: {
            labels: ["ÙŠÙ†Ø§ÙŠØ±", "ÙØ¨Ø±Ø§ÙŠØ±", "Ù…Ø§Ø±Ø³", "Ø£Ø¨Ø±ÙŠÙ„", "Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ"],
            datasets: [{
                label: "Ø·Ù„Ø¨Ø§Øª Ù…Ù‚Ø¨ÙˆÙ„Ø©",
                data: [120, 190, 170, 220, 180, 250],
                backgroundColor: isDarkMode ? "#FDA521" : "#033043", 
            }, {
                label: "Ø·Ù„Ø¨Ø§Øª Ù…Ø±ÙÙˆØ¶Ø©",
                data: [30, 40, 35, 45, 50, 40],
                backgroundColor: isDarkMode ? "#E85D04" : "#FDA521",
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { font: { family: "Tajawal", size: 14 }, color: textColor }
                },
                x: {
                    ticks: { font: { family: "Tajawal", size: 14 }, color: textColor }
                }
            },
            plugins: {
                legend: { labels: { font: { family: "Tajawal", size: 14 }, color: textColor } },
                title: {
                    display: true,
                    text: "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø© ÙˆØ§Ù„Ù…Ø±ÙÙˆØ¶Ø©",
                    font: { family: "Tajawal", size: 18, weight: "bold" },
                    color: textColor
                }
            }
        }
    });

    console.log("ğŸš€ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù†Ø¬Ø§Ø­!");
});

</script>
{% endblock %}


