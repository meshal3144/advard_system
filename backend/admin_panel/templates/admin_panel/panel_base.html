{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" dir="{% if LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{% static 'images/favicon.png' %}" type="image/png">

    <title>{% block title %}{% endblock %}</title>

    <!-- âœ… Ø®Ø·ÙˆØ· ÙˆØ£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link rel="stylesheet" href="{% static 'fonts/tajawal.css' %}"> 
    <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">

    <!-- âœ… Ù…Ù„ÙØ§Øª CSS -->
    <link rel="stylesheet" href="{% static 'css/shared.css' %}">
    <link rel="stylesheet" href="{% static 'css/panel_style.css' %}">
    <link rel="stylesheet" href="{% static 'css/dark_mode.css' %}">
    {% block extra_css %}{% endblock %}
</head>

<body class="{% if dark_mode %}dark-mode{% endif %}">
    <div class="panel-wrapper">

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <img src="/static/images/iconlogowi.svg" alt="Ø§Ù„Ø´Ø¹Ø§Ø±" style="max-width: 40px;">
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
                    <li>
                        <button class="sidebar-link" data-target="dashboard-menu">
                            <i class="ri-function-line"></i>
                        </button>
                        <div class="sub-sidebar" id="dashboard-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-function-line"></i>
                                <span>{% trans "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" %}</span>
                            </div>
                            <ul>
                                <li><a href="{% url 'admin_panel:dashboard' %}">{% trans "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
                    <li>
                        <button class="sidebar-link" data-target="clients-menu">
                            <i class="ri-group-line"></i>
                        </button>
                        <div class="sub-sidebar" id="clients-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-group-line"></i>
                                <span>{% trans "Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡" %}</span>
                            </div>
                            <ul>
                                <!-- ğŸ—‚ï¸ Ø¹Ù†ÙˆØ§Ù†: Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
                                <li>
                                    <span style="padding: 8px 16px; display: flex; align-items: center; color: #888;">
                                        <i class="ri-folder-2-fill" style="margin-left: 8px;"></i>
                                        Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                                    </span>
                                </li>
                    
                                <li>
                                    <a href="{% url 'admin_panel:clients' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        {% trans "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'admin_panel:companies' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        Ø§Ù„Ø´Ø±ÙƒØ§Øª
                                    </a>
                                </li>
                    
                                <!-- ğŸ“ Ø¹Ù†ÙˆØ§Ù†: Ø§Ù„Ø¹Ù‚ÙˆØ¯ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª -->
                                <li>
                                    <span style="padding: 8px 16px; display: flex; align-items: center; color: #888;">
                                        <i class="ri-folder-2-fill" style="margin-left: 8px;"></i>
                                        Ø§Ù„Ø¹Ù‚ÙˆØ¯ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª
                                    </span>
                                </li>
                    
                                <li>
                                    <a href="{% url 'contracts:contracts_list' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        {% trans "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚ÙˆØ¯" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'admin_panel:service_requests' %}">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        {% trans "Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø¹Ù‚ÙˆØ¯
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="ri-arrow-right-s-line" style="margin-left: 4px;"></i>
                                        Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    
                    <!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© -->
                    <li>
                        <button class="sidebar-link" data-target="system-users-menu">
                            <i class="ri-user-settings-line"></i>
                        </button>
                        <div class="sub-sidebar" id="system-users-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-user-settings-line"></i>
                                <span>{% trans "Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©" %}</span>
                            </div>
                            <ul>
                                <li><a href="{% url 'admin_panel:employees' %}">{% trans "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†" %}</a></li>
                                <li><a href="#">{% trans "Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
                    <li>
                        <button class="sidebar-link" data-target="finance-menu">
                            <i class="ri-bill-line"></i>
                        </button>
                        <div class="sub-sidebar" id="finance-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-bill-line"></i>
                                <span>{% trans "Ø§Ù„Ù…Ø§Ù„ÙŠØ©" %}</span>
                            </div>
                            <ul>
                                <li><a href="#">{% trans "Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
                    <li>
                        <button class="sidebar-link" data-target="insights-menu">
                            <i class="ri-bar-chart-line"></i>
                        </button>
                        <div class="sub-sidebar" id="insights-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-bar-chart-line"></i>
                                <span>{% trans "Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±" %}</span>
                            </div>
                            <ul>
                                <li><a href="#">{% trans "Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„ØªØ­Ø§Ù„ÙŠÙ„Ø§Øª" %}</a></li>
                                <li><a href="#">{% trans "Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ -->
                    <li>
                        <button class="sidebar-link" data-target="support-menu">
                            <i class="ri-customer-service-line"></i>
                        </button>
                        <div class="sub-sidebar" id="support-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-customer-service-line"></i>
                                <span>{% trans "Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ" %}</span>
                            </div>
                            <ul>
                                <li><a href="#">{% trans "Ù…Ø±ÙƒØ² Ø§Ù„Ø¯Ø¹Ù…" %}</a></li>
                            </ul>
                        </div>
                    </li>
                    <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
                    <li>
                        <button class="sidebar-link" data-target="settings-menu">
                            <i class="ri-settings-3-line"></i>
                        </button>
                        <div class="sub-sidebar" id="settings-menu">
                            <div class="sub-sidebar-header">
                                <i class="ri-settings-3-line"></i>
                                <span>{% trans "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" %}</span>
                            </div>
                            <ul>
                                <li><a href="#"> {% trans "Ø§Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…" %}</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- âœ… Ø§Ù„Ù‡ÙŠØ¯Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ø­Ø§ÙˆÙŠØ© -->
    
        <header class="panel-header">
            
            <div class="user-menu">
                <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ -->
                <i class="ri-moon-line theme-toggle" id="theme-toggle"></i>
            
                <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© -->
                <i class="ri-global-line lang-toggle" id="lang-toggle"></i>






                
                <div class="user-info">
                    {% if request.user.is_authenticated and request.user.image %}
                    <img src="{{ request.user.image.url }}" class="avatar" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©">
                {% else %}
                    <img src="{% static 'images/default_avatar.svg' %}" class="avatar" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©">
                {% endif %}
                
                    <div class="user-details">
                        <span class="user-name">
                            {% blocktrans with name=request.user.full_name %}
                            ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±: {{ name }}
                        {% endblocktrans %}
                        
                        </span>
                        <span class="user-email">{{ request.user.email }}</span>
                    </div>
                    <button class="dropdown-toggle">
                        <i class="ri-arrow-down-s-line dropdown-icon"></i>
                    </button>
                </div>
    
                <form id="lang-form" action="{% url 'set_language' %}" method="post" style="display: none;">
                    {% csrf_token %}
                    <input type="hidden" name="next" value="{{ request.path }}">
                    <input type="hidden" name="language" id="language-input">
                </form>

                <div class="dropdown-menu">
                    <a href="{% url 'admin_panel:profile' %}">
                        <i class="ri-user-settings-line"></i> {% trans "Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ" %}
                    </a>
                    <a href="#">
                        <i class="ri-notification-line"></i>{% trans "ØªØ®ØµÙŠØµ Ø§Ù„Ø§Ø´Ø¹Ø§Ø±Ø§Øª" %} 
                    </a>
                    <a href="#" class="logout-link" onclick="openModal(event)">
                        <i class="ri-logout-box-r-line"></i> {% trans "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬" %}
                    </a>
                </div>  
                
            </div>
                <!-- âœ… Ù‚Ø³Ù… Breadcrumb -->
                <nav class="breadcrumb-wrapper">
                    <ul class="breadcrumb" id="breadcrumb-list">
                        <li class="breadcrumb-item">
                            <a href="{% url 'admin_panel:dashboard' %}">
                                 {% trans "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" %}<i class="ri-home-4-line"></i>
                            </a>
                        </li>
                        <!-- Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø®Ø±Ù‰ Ø³ØªØ¶Ø§Ù Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </ul>
                </nav>


        </header>


        <!-- âœ… Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->

        <div class="main-container">
            <div class="notifications">
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            </div>

            <div id="logoutModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal()">Ã—</span>
                    <h2>{% trans "ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬" %}</h2>
                    <p>{% trans "Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ØŸ" %}</p>
                    <div class="modal-actions">
                        <form id="logoutForm" action="{% url 'logout' %}" method="POST">
                            {% csrf_token %}
                            <button type="submit">{% trans "Ù†Ø¹Ù…" %}</button>
                        </form>
                        <button onclick="closeModal()">{% trans "Ø¥Ù„ØºØ§Ø¡" %}</button>
                    </div>
                </div>
            </div>

            <main>


                {% block content %}{% endblock %}
            </main>

            <!-- Footer -->
            <footer class="panel-footer">
                <p>Â© 2025 advard</p>
            </footer>

        </div>
    </div>

    <!-- JavaScript -->
    <script src="{% static 'js/shared.js' %}" defer></script>
    <script src="{% static 'js/panel_script.js' %}" defer></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
